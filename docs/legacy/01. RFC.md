## RFC-001 — MVP “ChatGPT Local”

**Estado:** Propuesto
**Autor:** Renan Ruiz
**Fecha:** 2025-11-01

---

### 1. Propósito

El objetivo de este RFC es definir el alcance y los lineamientos técnicos para desarrollar un **MVP (Producto Mínimo Viable)** de un sistema tipo ChatGPT, ejecutado localmente en un servidor Linux, que permita a varios usuarios utilizar la API de OpenAI u OpenRouter de forma económica, segura y con control individual del consumo.

---

### 2. Contexto

La suscripción ChatGPT Plus cuesta 20 USD mensuales, lo que resulta costoso para usuarios con uso moderado.
La alternativa es utilizar la **API directa**, pagando solo por tokens consumidos.
El proyecto busca ofrecer una experiencia equivalente a ChatGPT pero con:

* Control total de datos.
* Límite mensual por usuario.
* Interfaz moderna y personalizable.

El sistema será auto-alojado y no dependerá de servicios externos salvo la API de IA.

---

### 3. Objetivos del MVP

* Reproducir la **experiencia de ChatGPT**: chat en tiempo real, formato Markdown, bloques de código y streaming de texto.
* Permitir que cada usuario tenga **su propio historial y configuración** (memoria separada).
* Gestionar las claves API y el **consumo total de tokens** en el backend.
* Establecer un **límite mensual de tokens por usuario** (configurable).
* Guardar las conversaciones localmente y **exportarlas a archivo `.md`**.
* Ejecutarse completamente en **servidor Linux local**.

---

### 4. Alcance técnico del MVP

**Frontend:**

* Framework: React + Vite + Tailwind + shadcn/ui.
* Características:

  * Streaming de respuestas (SSE).
  * Render Markdown con `react-markdown` y `remark-gfm`.
  * Exportación de chat a `.md`.
  * Historial básico persistente (IndexedDB o JSON local).

**Backend:**

* Framework: .NET 8 Minimal API.
* Funcionalidad:

  * Endpoints `/chat`, `/usage`, `/export`.
  * Validación de clave API y comunicación con OpenAI/OpenRouter.
  * Control de tokens y límite mensual.
  * Persistencia local (SQLite o JSON).

**Arquitectura prevista:**

```
Frontend (React) → Backend (.NET 8) → API OpenAI/OpenRouter
                          ↕
                    Almacenamiento local
```

---

### 5. Requisitos mínimos

| Tipo | Descripción                                                 |
| ---- | ----------------------------------------------------------- |
| RF01 | Enviar y recibir mensajes con formato Markdown y streaming. |
| RF02 | Guardar historial de chat por usuario.                      |
| RF03 | Mostrar contador de tokens y costo estimado.                |
| RF04 | Limitar uso mensual de tokens por usuario.                  |
| RF05 | Exportar conversación a archivo `.md`.                      |
| RF06 | Correr en Linux sin Docker ni servicios externos.           |

---

### 6. No incluidos en el MVP

* Autenticación avanzada (solo perfiles locales simples).
* Embeddings, RAG o memoria semántica.
* Sincronización entre diferentes instalaciones.
* Módulo Python (FastAPI) — se definirá en siguiente fase.

---

### 7. Métricas de éxito

* Sistema operativo y funcional en servidor Linux.
* Experiencia de chat fluida (respuesta visible < 3 s).
* Exportación funcional a `.md`.
* Control básico de tokens implementado.
* Costo promedio < 10 USD/mes por usuario.

---

### 8. Próximos pasos

1. Configurar repositorio y estructura base (`frontend/`, `backend/`, `data/`).
2. Implementar endpoints mínimos en .NET 8.
3. Crear interfaz React con streaming y exportación.
4. Realizar pruebas con una sola API key compartida.
5. Documentar resultados y ajustar para versión multiusuario completa.

---

¿Deseas que prepare ahora el **ADR-001** correspondiente a esta MVP (donde se justifica formalmente por qué se eligió .NET 8 para el backend y React para el frontend)?
